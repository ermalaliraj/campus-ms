/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.0 		*/
/*  Created On : 22-dic-2017 18:37:13 				*/
/*  DBMS       : Oracle 						*/
/* ---------------------------------------------------- */

/* Drop Tables */

begin
	EXECUTE IMMEDIATE 'DROP TABLE   "COURSE" CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   "STUDENT" CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   "SUDENT_COURSE" CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

begin
	EXECUTE IMMEDIATE 'DROP TABLE   "TOPIC" CASCADE CONSTRAINTS';
	EXCEPTION WHEN OTHERS THEN NULL;
end;  
/

/* Create Tables */

CREATE TABLE  "COURSE"
(
	"ID" LONG NOT NULL,
	"NAME" VARCHAR2(50) NULL,
	"DESC" VARCHAR2(200) NULL
)
;

CREATE TABLE  "STUDENT"
(
	"ID" LONG NOT NULL,
	"NAME" VARCHAR2(50) NULL,
	"SURNAME" VARCHAR2(50) NULL,
	"TITLE" VARCHAR2(50) NULL
)
;

CREATE TABLE  "SUDENT_COURSE"
(
	"COURSE_ID" LONG NOT NULL,
	"STUDENT_ID" LONG NOT NULL
)
;

CREATE TABLE  "TOPIC"
(
	"ID" LONG NOT NULL,
	"NAME" VARCHAR2(50) NULL,
	"DESC" VARCHAR2(200) NULL
)
;

/* Create Primary Keys, Indexes, Uniques, Checks, Triggers */

ALTER TABLE  "COURSE" 
 ADD CONSTRAINT "PK_COURSE"
	PRIMARY KEY ("ID") 
 USING INDEX
;

CREATE INDEX "IXFK_COURSE_TOPIC"   
 ON  "COURSE" ("ID") 
;

ALTER TABLE  "STUDENT" 
 ADD CONSTRAINT "PK_STUDENT"
	PRIMARY KEY ("ID") 
 USING INDEX
;

ALTER TABLE  "SUDENT_COURSE" 
 ADD CONSTRAINT "PK_SUDENT_COURSE"
	PRIMARY KEY ("COURSE_ID","STUDENT_ID") 
 USING INDEX
;

ALTER TABLE  "TOPIC" 
 ADD CONSTRAINT "PK_TOPIC"
	PRIMARY KEY ("ID") 
 USING INDEX
;

/* Create Foreign Key Constraints */

ALTER TABLE  "COURSE" 
 ADD CONSTRAINT "FK_COURSE_TOPIC"
	FOREIGN KEY ("ID") REFERENCES  "TOPIC" ("ID")
;
